{"ast":null,"code":"import _objectSpread from \"G:\\\\Workspace\\\\2018\\\\expense-manager-react\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"G:\\\\Workspace\\\\2018\\\\expense-manager-react\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"G:\\\\Workspace\\\\2018\\\\expense-manager-react\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"G:\\\\Workspace\\\\2018\\\\expense-manager-react\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"G:\\\\Workspace\\\\2018\\\\expense-manager-react\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"G:\\\\Workspace\\\\2018\\\\expense-manager-react\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _defineProperty from \"G:\\\\Workspace\\\\2018\\\\expense-manager-react\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"G:\\\\Workspace\\\\2018\\\\expense-manager-react\\\\src\\\\components\\\\signUp\\\\index.js\";\nimport React, { Component } from \"react\";\nimport { Link, withRouter } from \"react-router-dom\";\nimport { auth, db } from \"../../firebase\";\nimport * as routes from \"../../constants/routes\";\nimport * as analytics from \"./../../analytics/analytics\";\n\nvar SignUpPage = function SignUpPage(_ref) {\n  var history = _ref.history;\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 9\n    },\n    __self: this\n  }, React.createElement(SignUpForm, {\n    history: history,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 10\n    },\n    __self: this\n  }));\n};\n\nvar INITIAL_STATE = {\n  username: \"\",\n  email: \"\",\n  passwordOne: \"\",\n  passwordTwo: \"\",\n  error: null\n};\n\nvar byPropKey = function byPropKey(propertyName, value) {\n  return function () {\n    return _defineProperty({}, propertyName, value);\n  };\n};\n\nvar SignUpForm =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(SignUpForm, _Component);\n\n  function SignUpForm(props) {\n    var _this;\n\n    _classCallCheck(this, SignUpForm);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SignUpForm).call(this, props));\n\n    _this.onSubmit = function (event) {\n      var _this$state = _this.state,\n          username = _this$state.username,\n          email = _this$state.email,\n          passwordOne = _this$state.passwordOne;\n      var history = _this.props.history;\n      auth.doCreateUserWithEmailAndPassword(email, passwordOne).then(function (authUser) {\n        // create a user in the firebase db too\n        db.doCreateUser(authUser.uid, username, email).then(function () {\n          _this.setState(function () {\n            return _objectSpread({}, INITIAL_STATE);\n          });\n\n          history.push(routes.HOME);\n        }).catch(function (error) {\n          _this.setState(byPropKey(\"error\", error));\n        });\n\n        if (!authUser.emailVerified) {\n          // send a verification mail to user\n          authUser.sendEmailVerification().then(function () {\n            history.push(routes.USER_VERIFICATION);\n          }).catch(function (error) {\n            alert(\"something went wrong: \", error);\n          });\n        }\n      }).catch(function (error) {\n        _this.setState(byPropKey(\"error\", error));\n      });\n      event.preventDefault();\n    };\n\n    _this.state = _objectSpread({}, INITIAL_STATE);\n    return _this;\n  }\n\n  _createClass(SignUpForm, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      analytics.initGA();\n      analytics.logPageView();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state2 = this.state,\n          username = _this$state2.username,\n          email = _this$state2.email,\n          passwordOne = _this$state2.passwordOne,\n          passwordTwo = _this$state2.passwordTwo,\n          error = _this$state2.error;\n      var isInvalid = passwordOne !== passwordTwo || passwordOne === \"\" || email === \"\" || username === \"\";\n      return React.createElement(\"div\", {\n        className: \"login-page\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        onSubmit: this.onSubmit,\n        className: \"form\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        value: username,\n        onChange: function onChange(event) {\n          return _this2.setState(byPropKey(\"username\", event.target.value));\n        },\n        type: \"text\",\n        placeholder: \"Full Name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        value: email,\n        onChange: function onChange(event) {\n          return _this2.setState(byPropKey(\"email\", event.target.value));\n        },\n        type: \"text\",\n        placeholder: \"Email Address\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        value: passwordOne,\n        onChange: function onChange(event) {\n          return _this2.setState(byPropKey(\"passwordOne\", event.target.value));\n        },\n        type: \"password\",\n        placeholder: \"Password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        value: passwordTwo,\n        onChange: function onChange(event) {\n          return _this2.setState(byPropKey(\"passwordTwo\", event.target.value));\n        },\n        type: \"password\",\n        placeholder: \"Confirm Password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        disabled: isInvalid,\n        type: \"submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, \"Sign Up\"), error && React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, error.message)), React.createElement(\"p\", {\n        style: StyleInSignUp,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, \"Already a user? \", React.createElement(Link, {\n        to: routes.SIGN_IN,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, \"Sign in\")));\n    }\n  }]);\n\n  return SignUpForm;\n}(Component);\n\nvar style = {\n  textAlign: \"center\"\n};\nvar StyleInSignUp = {\n  marginTop: \"-10px\",\n  textAlign: \"center\"\n};\n\nvar SignUpLink = function SignUpLink() {\n  return React.createElement(\"p\", {\n    style: style,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129\n    },\n    __self: this\n  }, \"Don't have an account? \", React.createElement(Link, {\n    to: routes.SIGN_UP,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130\n    },\n    __self: this\n  }, \"Sign Up\"));\n};\n\nexport default withRouter(SignUpPage);\nexport { SignUpForm, SignUpLink };","map":{"version":3,"sources":["G:\\Workspace\\2018\\expense-manager-react\\src\\components\\signUp\\index.js"],"names":["React","Component","Link","withRouter","auth","db","routes","analytics","SignUpPage","history","INITIAL_STATE","username","email","passwordOne","passwordTwo","error","byPropKey","propertyName","value","SignUpForm","props","onSubmit","event","state","doCreateUserWithEmailAndPassword","then","authUser","doCreateUser","uid","setState","push","HOME","catch","emailVerified","sendEmailVerification","USER_VERIFICATION","alert","preventDefault","initGA","logPageView","isInvalid","target","message","StyleInSignUp","SIGN_IN","style","textAlign","marginTop","SignUpLink","SIGN_UP"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { Link, withRouter } from \"react-router-dom\";\r\nimport { auth, db } from \"../../firebase\";\r\nimport * as routes from \"../../constants/routes\";\r\n\r\nimport * as analytics from \"./../../analytics/analytics\";\r\n\r\nconst SignUpPage = ({ history }) => (\r\n    <div>\r\n        <SignUpForm history={history} />\r\n    </div>\r\n);\r\n\r\nconst INITIAL_STATE = {\r\n    username: \"\",\r\n    email: \"\",\r\n    passwordOne: \"\",\r\n    passwordTwo: \"\",\r\n    error: null\r\n};\r\n\r\nconst byPropKey = (propertyName, value) => () => ({\r\n    [propertyName]: value\r\n});\r\n\r\nclass SignUpForm extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = { ...INITIAL_STATE };\r\n    }\r\n\r\n    componentDidMount() {\r\n        analytics.initGA();\r\n        analytics.logPageView();\r\n    }\r\n\r\n    onSubmit = event => {\r\n        const { username, email, passwordOne } = this.state;\r\n\r\n        const { history } = this.props;\r\n\r\n        auth.doCreateUserWithEmailAndPassword(email, passwordOne)\r\n            .then(authUser => {\r\n                // create a user in the firebase db too\r\n                db.doCreateUser(authUser.uid, username, email)\r\n                    .then(() => {\r\n                        this.setState(() => ({ ...INITIAL_STATE }));\r\n                        history.push(routes.HOME);\r\n                    })\r\n                    .catch(error => {\r\n                        this.setState(byPropKey(\"error\", error));\r\n                    });\r\n\r\n                if (!authUser.emailVerified) {\r\n                    // send a verification mail to user\r\n                    authUser\r\n                        .sendEmailVerification()\r\n                        .then(function() {\r\n                            history.push(routes.USER_VERIFICATION);\r\n                        })\r\n                        .catch(function(error) {\r\n                            alert(\"something went wrong: \", error);\r\n                        });\r\n                }\r\n            })\r\n            .catch(error => {\r\n                this.setState(byPropKey(\"error\", error));\r\n            });\r\n\r\n        event.preventDefault();\r\n    };\r\n\r\n    render() {\r\n        const { username, email, passwordOne, passwordTwo, error } = this.state;\r\n\r\n        const isInvalid = passwordOne !== passwordTwo || passwordOne === \"\" || email === \"\" || username === \"\";\r\n\r\n        return (\r\n            <div className=\"login-page\">\r\n                <form onSubmit={this.onSubmit} className=\"form\">\r\n                    <input\r\n                        value={username}\r\n                        onChange={event => this.setState(byPropKey(\"username\", event.target.value))}\r\n                        type=\"text\"\r\n                        placeholder=\"Full Name\"\r\n                    />\r\n                    <input\r\n                        value={email}\r\n                        onChange={event => this.setState(byPropKey(\"email\", event.target.value))}\r\n                        type=\"text\"\r\n                        placeholder=\"Email Address\"\r\n                    />\r\n                    <input\r\n                        value={passwordOne}\r\n                        onChange={event => this.setState(byPropKey(\"passwordOne\", event.target.value))}\r\n                        type=\"password\"\r\n                        placeholder=\"Password\"\r\n                    />\r\n                    <input\r\n                        value={passwordTwo}\r\n                        onChange={event => this.setState(byPropKey(\"passwordTwo\", event.target.value))}\r\n                        type=\"password\"\r\n                        placeholder=\"Confirm Password\"\r\n                    />\r\n                    <button disabled={isInvalid} type=\"submit\">\r\n                        Sign Up\r\n                    </button>\r\n\r\n                    {error && <p>{error.message}</p>}\r\n                </form>\r\n                <p style={StyleInSignUp}>\r\n                    Already a user? <Link to={routes.SIGN_IN}>Sign in</Link>\r\n                </p>\r\n            </div>\r\n        );\r\n    }\r\n}\r\nconst style = {\r\n    textAlign: \"center\"\r\n};\r\n\r\nconst StyleInSignUp = {\r\n    marginTop: \"-10px\",\r\n    textAlign: \"center\"\r\n};\r\n\r\nconst SignUpLink = () => (\r\n    <p style={style}>\r\n        Don't have an account? <Link to={routes.SIGN_UP}>Sign Up</Link>\r\n    </p>\r\n);\r\n\r\nexport default withRouter(SignUpPage);\r\n\r\nexport { SignUpForm, SignUpLink };\r\n"]},"metadata":{},"sourceType":"module"}