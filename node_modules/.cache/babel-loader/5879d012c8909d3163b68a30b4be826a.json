{"ast":null,"code":"import _objectSpread from \"G:\\\\Workspace\\\\2018\\\\expense-manager-react\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"G:\\\\Workspace\\\\2018\\\\expense-manager-react\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"G:\\\\Workspace\\\\2018\\\\expense-manager-react\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"G:\\\\Workspace\\\\2018\\\\expense-manager-react\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"G:\\\\Workspace\\\\2018\\\\expense-manager-react\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"G:\\\\Workspace\\\\2018\\\\expense-manager-react\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"G:\\\\Workspace\\\\2018\\\\expense-manager-react\\\\src\\\\components\\\\App.js\";\nimport React, { Component } from \"react\";\nimport { BrowserRouter as Router, Route } from \"react-router-dom\";\nimport { firebase } from \"../firebase/index\";\nimport { defaults } from \"react-chartjs-2\";\nimport Trianglify from \"trianglify\";\nimport \"font-awesome/css/font-awesome.min.css\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"../assets/css/index.css\";\nimport \"../assets/css/signin.css\";\nimport Navigation from \"./Navigation/index\"; //import LandingPage from \"./Landing/index\";\n\nimport SignUpPage from \"./signUp/index\";\nimport SignInPage from \"./signIn/index\";\nimport ShopPage from \"./Shop/index\";\nimport PasswordForgetPage from \"./forgotPassword/index\";\nimport HomePage from \"./Home/index\";\nimport UpdatePassword from \"./Settings/UpdatePassword\";\nimport MonthViewPage from \"./MonthView/index\";\nimport DailyViewPage from \"./DailyView/index\";\nimport FilterViewPage from \"./FilterView/index\";\nimport UserVerification from \"./UserVerification/index\";\nimport StatisticsPage from \"./Statistics/index\";\nimport LoanPage from \"./Loan/index\";\nimport SettingsPage from \"./Settings/index\";\nimport SavingsPage from \"./Savings/index\";\nimport ErrorPage from \"./Error/index\";\nimport * as routes from \"../constants/routes\";\nimport * as db from \"../firebase/db\";\nimport * as utils from \"./Util\";\nimport * as analytics from \"./../analytics/analytics\";\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App(props) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this, props));\n    _this.state = {\n      authUser: null,\n      users: null,\n      expenses: null,\n      loans: null,\n      defaultCategoriesNames: null,\n      defaultCategoriesColors: null,\n      settings: null,\n      savings: null\n    };\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      document.title = \"Expense Manager\";\n      analytics.initGA();\n      analytics.logPageView();\n      firebase.auth.onAuthStateChanged(function (authUser) {\n        authUser ? _this2.setState({\n          authUser: authUser\n        }) : _this2.setState({\n          authUser: null\n        });\n\n        if (_this2.state.authUser) {\n          // get all the users in the db\n          db.onceGetUsers().then(function (snapshot) {\n            _this2.setState({\n              users: snapshot.val()\n            });\n          }); // get and set expenses in db\n          //  firebase.db\n          //      .ref(\"expenses\")\n          //      .on(\"value\", data => {\n          //          if (data) {\n          //              this.setState({\n          //                  expenses: data.val()\n          //              });\n          //          }\n          //      });\n          // get all the settings\n\n          firebase.db.ref(\"settings/\".concat(_this2.state.authUser.uid)).on(\"value\", function (data) {\n            if (data.val() !== null) {\n              _this2.setState({\n                settings: data.val()\n              });\n\n              if (_this2.state.settings) {\n                //setting the font family to chart.js\n                defaults.global.defaultFontFamily = _this2.state.settings.font || \"sans-serif\";\n              }\n            } else {\n              db.doCreateSettingsForUser(_this2.state.authUser.uid, \"sans-serif\", \"night\", \"Indian Rupees\", \"off\", \"Indian Rupees\", 15000);\n            }\n          }); // get all the expenses from new table\n\n          firebase.db.ref(\"expenseTable/\".concat(_this2.state.authUser.uid)).on(\"value\", function (data) {\n            if (data.val() !== null) {\n              _this2.setState({\n                expenses: data.val()\n              });\n            } else {\n              // get and set expenses in db from old expenses table to new expenseTable\n              firebase.db.ref(\"expenses\").on(\"value\", function (data) {\n                if (data.val() !== null) {\n                  var eachExpense = utils.eachExpense(data.val());\n                  var thisUsersExpenses = utils.currentUsersExpenses(eachExpense, _this2.state.authUser);\n                  thisUsersExpenses.map(function (elem) {\n                    db.doCreateExpenseTable(elem.value.uid, elem.value.date, elem.value.expense, elem.value.category, elem.value.comments, elem.value.day, elem.key);\n                  });\n                  thisUsersExpenses.map(function (elem) {\n                    firebase.db.ref(\"expenses/\".concat(elem.key)).remove();\n                  }); // need to set empty state once deleting all records in legacy table\n                  // or else it will always be loading\n\n                  _this2.setState({\n                    expenses: data.val()\n                  });\n                }\n              });\n            }\n          }); // get all the savings from new table\n\n          firebase.db.ref(\"savingsTable/\".concat(_this2.state.authUser.uid)).on(\"value\", function (data) {\n            if (data.val() !== null) {\n              _this2.setState({\n                savings: data.val()\n              });\n            } else {\n              _this2.setState({\n                savings: data.val()\n              });\n            }\n          }); // get all the defaultCategories\n\n          firebase.db.ref(\"defaultCategories\").on(\"value\", function (data) {\n            if (data.val() !== null) {\n              _this2.setState({\n                defaultCategoriesNames: Object.keys(data.val()),\n                defaultCategoriesColors: Object.values(data.val())\n              });\n            }\n          }); // // get all the loan details\n          // firebase.db.ref(\"loans\").on(\"value\", data => {\n          //     if (data) {\n          //         this.setState({\n          //             loans: data.val()\n          //         });\n          //     }\n          // });\n          // get all the expenses from new table\n\n          firebase.db.ref(\"loanTable/\".concat(_this2.state.authUser.uid)).on(\"value\", function (data) {\n            if (data.val() !== null) {\n              _this2.setState({\n                loans: data.val()\n              });\n            } else {\n              // get and set expenses in db from old expenses table to new expenseTable\n              firebase.db.ref(\"loans\").on(\"value\", function (data) {\n                if (data.val() !== null) {\n                  var eachExpense = utils.eachExpense(data.val());\n                  var thisUsersLoans = utils.currentUsersExpenses(eachExpense, _this2.state.authUser);\n                  thisUsersLoans.map(function (elem) {\n                    db.doCreateLoanTable(elem.value.uid, elem.value.date, elem.value.amount, elem.value.loanType, elem.value.reason, elem.value.person, elem.value.day, elem.value.status, elem.key);\n                  });\n                  thisUsersLoans.map(function (elem) {\n                    firebase.db.ref(\"loans/\".concat(elem.key)).remove();\n                  }); // need to set empty state once deleting all records in legacy table\n                  // or else it will always be loading\n\n                  _this2.setState({\n                    loans: data.val()\n                  });\n                }\n              });\n            }\n          });\n          var expensesRef = firebase.db.ref(\"expenseTable/\".concat(_this2.state.authUser.uid));\n          expensesRef.on(\"child_removed\", function (data) {\n            firebase.db.ref(\"expenseTable/\".concat(_this2.state.authUser.uid)).on(\"value\", function (data) {\n              if (data) {\n                _this2.setState({\n                  expenses: data.val()\n                });\n              }\n            });\n          });\n          var loansRef = firebase.db.ref(\"loanTable/\".concat(_this2.state.authUser.uid));\n          loansRef.on(\"child_removed\", function (data) {\n            firebase.db.ref(\"loanTable/\".concat(_this2.state.authUser.uid)).on(\"value\", function (data) {\n              if (data) {\n                _this2.setState({\n                  loans: data.val()\n                });\n              }\n            });\n          });\n        } // return authUser ? this.setState(() => { authUser: authUser}) : this.setState(() => ({authUser: null}))\n\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var bodyStyle = {\n        backgroundColor: this.state.settings ? this.state.settings.mode === \"night\" ? \"#484842 !important\" : \"auto\" : \"auto\",\n        height: \"100vh\"\n      };\n      var patternconfig = {\n        height: 300,\n        width: 500,\n        cell_size: 35\n      }; // palette: Trianglify.colorbrewer,\n\n      var pattern = Trianglify(_objectSpread({}, patternconfig));\n      var pattern2 = Trianglify(_objectSpread({}, patternconfig));\n      var pattern3 = Trianglify(_objectSpread({}, patternconfig));\n      var pattern4 = Trianglify(_objectSpread({}, patternconfig));\n      var pattern5 = Trianglify(_objectSpread({}, patternconfig));\n      var pattern6 = Trianglify(_objectSpread({}, patternconfig));\n      var pattern7 = Trianglify(_objectSpread({}, patternconfig));\n      var pattern8 = Trianglify(_objectSpread({}, patternconfig));\n      var cards = {\n        card8: {\n          backgroundImage: \"url(\".concat(pattern8.png(), \")\")\n        },\n        card7: {\n          backgroundImage: \"url(\".concat(pattern7.png(), \")\")\n        },\n        card6: {\n          backgroundImage: \"url(\".concat(pattern6.png(), \")\")\n        },\n        card5: {\n          backgroundImage: \"url(\".concat(pattern5.png(), \")\")\n        },\n        card4: {\n          backgroundImage: \"url(\".concat(pattern4.png(), \")\")\n        },\n        card3: {\n          backgroundImage: \"url(\".concat(pattern3.png(), \")\")\n        },\n        card2: {\n          backgroundImage: \"url(\".concat(pattern2.png(), \")\")\n        },\n        card1: {\n          backgroundImage: \"url(\".concat(pattern.png(), \")\")\n        }\n      };\n      return React.createElement(Router, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 277\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: bodyStyle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 278\n        },\n        __self: this\n      }, React.createElement(Navigation, {\n        authUser: this.state.authUser,\n        settings: this.state.settings,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 279\n        },\n        __self: this\n      }), React.createElement(Switch, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 280\n        },\n        __self: this\n      }, React.createElement(Route, {\n        exact: true,\n        path: routes.SIGN_UP,\n        component: function component() {\n          return React.createElement(SignUpPage, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 282\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 282\n        },\n        __self: this\n      }), React.createElement(Route, {\n        exact: true,\n        path: routes.SIGN_IN,\n        component: function component() {\n          return React.createElement(SignInPage, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 283\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 283\n        },\n        __self: this\n      }), React.createElement(Route, {\n        exact: true,\n        path: routes.SHOP,\n        component: function component() {\n          return React.createElement(ShopPage, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 284\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 284\n        },\n        __self: this\n      }), React.createElement(Route, {\n        exact: true,\n        path: routes.PASSWORD_FORGET,\n        component: function component() {\n          return React.createElement(PasswordForgetPage, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 286\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 286\n        },\n        __self: this\n      }), React.createElement(Route, {\n        exact: true,\n        path: routes.UPDATE_PASSWORD,\n        component: function component() {\n          return React.createElement(UpdatePassword, {\n            user: _this3.state.authUser,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 290\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 287\n        },\n        __self: this\n      }), React.createElement(Route, {\n        exact: true,\n        path: routes.USER_VERIFICATION,\n        component: function component() {\n          return React.createElement(UserVerification, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 292\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 292\n        },\n        __self: this\n      }), React.createElement(Route, {\n        exact: true,\n        path: routes.HOME,\n        component: function component() {\n          return React.createElement(HomePage, {\n            user: _this3.state.authUser,\n            expenses: _this3.state.expenses,\n            settings: _this3.state.settings,\n            cards: cards,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 297\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 293\n        },\n        __self: this\n      }), React.createElement(Route, {\n        exact: true,\n        path: routes.MONTH_VIEW,\n        component: function component() {\n          return React.createElement(MonthViewPage, {\n            user: _this3.state.authUser,\n            expenses: _this3.state.expenses,\n            settings: _this3.state.settings,\n            cards: cards,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 309\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 305\n        },\n        __self: this\n      }), React.createElement(Route, {\n        exact: true,\n        path: routes.DAILY_VIEW,\n        component: function component() {\n          return React.createElement(DailyViewPage, {\n            user: _this3.state.authUser,\n            expenses: _this3.state.expenses,\n            settings: _this3.state.settings,\n            cards: cards,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 322\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 318\n        },\n        __self: this\n      }), React.createElement(Route, {\n        exact: true,\n        path: routes.FILTER_VIEW,\n        component: function component() {\n          return React.createElement(FilterViewPage, {\n            user: _this3.state.authUser,\n            expenses: _this3.state.expenses,\n            settings: _this3.state.settings,\n            cards: cards,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 335\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 331\n        },\n        __self: this\n      }), React.createElement(Route, {\n        exact: true,\n        path: routes.STATISTICS_VIEW,\n        component: function component() {\n          return React.createElement(StatisticsPage, {\n            user: _this3.state.authUser,\n            expenses: _this3.state.expenses,\n            settings: _this3.state.settings,\n            cards: cards,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 347\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 343\n        },\n        __self: this\n      }), React.createElement(Route, {\n        exact: true,\n        path: routes.LOAN_VIEW,\n        component: function component() {\n          return React.createElement(LoanPage, {\n            user: _this3.state.authUser,\n            loans: _this3.state.loans,\n            settings: _this3.state.settings,\n            cards: cards,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 359\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 355\n        },\n        __self: this\n      }), React.createElement(Route, {\n        exact: true,\n        path: routes.SETTINGS_VIEW,\n        component: function component() {\n          return React.createElement(SettingsPage, {\n            user: _this3.state.authUser,\n            settings: _this3.state.settings,\n            cards: cards,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 372\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 368\n        },\n        __self: this\n      }), React.createElement(Route, {\n        exact: true,\n        path: routes.SAVINGS_VIEW,\n        component: function component() {\n          return React.createElement(SavingsPage, {\n            user: _this3.state.authUser,\n            savings: _this3.state.savings,\n            settings: _this3.state.settings,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 380\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 376\n        },\n        __self: this\n      }), React.createElement(Route, {\n        component: function component() {\n          return React.createElement(ErrorPage, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 390\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 388\n        },\n        __self: this\n      }))));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default App;","map":{"version":3,"sources":["G:\\Workspace\\2018\\expense-manager-react\\src\\components\\App.js"],"names":["React","Component","BrowserRouter","Router","Route","firebase","defaults","Trianglify","Navigation","SignUpPage","SignInPage","ShopPage","PasswordForgetPage","HomePage","UpdatePassword","MonthViewPage","DailyViewPage","FilterViewPage","UserVerification","StatisticsPage","LoanPage","SettingsPage","SavingsPage","ErrorPage","routes","db","utils","analytics","App","props","state","authUser","users","expenses","loans","defaultCategoriesNames","defaultCategoriesColors","settings","savings","document","title","initGA","logPageView","auth","onAuthStateChanged","setState","onceGetUsers","then","snapshot","val","ref","uid","on","data","global","defaultFontFamily","font","doCreateSettingsForUser","eachExpense","thisUsersExpenses","currentUsersExpenses","map","elem","doCreateExpenseTable","value","date","expense","category","comments","day","key","remove","Object","keys","values","thisUsersLoans","doCreateLoanTable","amount","loanType","reason","person","status","expensesRef","loansRef","bodyStyle","backgroundColor","mode","height","patternconfig","width","cell_size","pattern","pattern2","pattern3","pattern4","pattern5","pattern6","pattern7","pattern8","cards","card8","backgroundImage","png","card7","card6","card5","card4","card3","card2","card1","SIGN_UP","SIGN_IN","SHOP","PASSWORD_FORGET","UPDATE_PASSWORD","USER_VERIFICATION","HOME","MONTH_VIEW","DAILY_VIEW","FILTER_VIEW","STATISTICS_VIEW","LOAN_VIEW","SETTINGS_VIEW","SAVINGS_VIEW"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { BrowserRouter as Router, Route } from \"react-router-dom\";\r\nimport { firebase } from \"../firebase/index\";\r\nimport { defaults } from \"react-chartjs-2\";\r\nimport Trianglify from \"trianglify\";\r\n\r\nimport \"font-awesome/css/font-awesome.min.css\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport \"../assets/css/index.css\";\r\nimport \"../assets/css/signin.css\";\r\n\r\nimport Navigation from \"./Navigation/index\";\r\n//import LandingPage from \"./Landing/index\";\r\nimport SignUpPage from \"./signUp/index\";\r\nimport SignInPage from \"./signIn/index\";\r\nimport ShopPage from \"./Shop/index\";\r\nimport PasswordForgetPage from \"./forgotPassword/index\";\r\nimport HomePage from \"./Home/index\";\r\nimport UpdatePassword from \"./Settings/UpdatePassword\";\r\nimport MonthViewPage from \"./MonthView/index\";\r\nimport DailyViewPage from \"./DailyView/index\";\r\nimport FilterViewPage from \"./FilterView/index\";\r\nimport UserVerification from \"./UserVerification/index\";\r\nimport StatisticsPage from \"./Statistics/index\";\r\nimport LoanPage from \"./Loan/index\";\r\nimport SettingsPage from \"./Settings/index\";\r\nimport SavingsPage from \"./Savings/index\";\r\nimport ErrorPage from \"./Error/index\";\r\n\r\nimport * as routes from \"../constants/routes\";\r\nimport * as db from \"../firebase/db\";\r\nimport * as utils from \"./Util\";\r\nimport * as analytics from \"./../analytics/analytics\";\r\n\r\nclass App extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            authUser: null,\r\n            users: null,\r\n            expenses: null,\r\n            loans: null,\r\n            defaultCategoriesNames: null,\r\n            defaultCategoriesColors: null,\r\n            settings: null,\r\n            savings: null\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        document.title = \"Expense Manager\";\r\n\r\n        analytics.initGA();\r\n        analytics.logPageView();\r\n\r\n        firebase.auth.onAuthStateChanged(authUser => {\r\n            authUser\r\n                ? this.setState({\r\n                    authUser: authUser\r\n                })\r\n                : this.setState({\r\n                    authUser: null\r\n                });\r\n\r\n            if (this.state.authUser) {\r\n                // get all the users in the db\r\n                db.onceGetUsers().then(snapshot => {\r\n                    this.setState({\r\n                        users: snapshot.val()\r\n                    });\r\n                });\r\n\r\n                // get and set expenses in db\r\n                //  firebase.db\r\n                //      .ref(\"expenses\")\r\n                //      .on(\"value\", data => {\r\n                //          if (data) {\r\n                //              this.setState({\r\n                //                  expenses: data.val()\r\n                //              });\r\n                //          }\r\n                //      });\r\n\r\n                // get all the settings\r\n                firebase.db.ref(`settings/${this.state.authUser.uid}`).on(\"value\", data => {\r\n                    if (data.val() !== null) {\r\n                        this.setState({\r\n                            settings: data.val()\r\n                        });\r\n\r\n                        if (this.state.settings) {\r\n                            //setting the font family to chart.js\r\n                            defaults.global.defaultFontFamily = this.state.settings.font || \"sans-serif\";\r\n                        }\r\n                    } else {\r\n                        db.doCreateSettingsForUser(\r\n                            this.state.authUser.uid,\r\n                            \"sans-serif\",\r\n                            \"night\",\r\n                            \"Indian Rupees\",\r\n                            \"off\",\r\n                            \"Indian Rupees\",\r\n                            15000\r\n                        );\r\n                    }\r\n                });\r\n\r\n                // get all the expenses from new table\r\n                firebase.db.ref(`expenseTable/${this.state.authUser.uid}`).on(\"value\", data => {\r\n                    if (data.val() !== null) {\r\n                        this.setState({\r\n                            expenses: data.val()\r\n                        });\r\n                    } else {\r\n                        // get and set expenses in db from old expenses table to new expenseTable\r\n                        firebase.db.ref(\"expenses\").on(\"value\", data => {\r\n                            if (data.val() !== null) {\r\n                                const eachExpense = utils.eachExpense(data.val());\r\n                                const thisUsersExpenses = utils.currentUsersExpenses(eachExpense, this.state.authUser);\r\n\r\n                                thisUsersExpenses.map(elem => {\r\n                                    db.doCreateExpenseTable(\r\n                                        elem.value.uid,\r\n                                        elem.value.date,\r\n                                        elem.value.expense,\r\n                                        elem.value.category,\r\n                                        elem.value.comments,\r\n                                        elem.value.day,\r\n                                        elem.key\r\n                                    );\r\n                                });\r\n                                thisUsersExpenses.map(elem => {\r\n                                    firebase.db.ref(`expenses/${elem.key}`).remove();\r\n                                });\r\n\r\n                                // need to set empty state once deleting all records in legacy table\r\n                                // or else it will always be loading\r\n\r\n                                this.setState({\r\n                                    expenses: data.val()\r\n                                });\r\n                            }\r\n                        });\r\n                    }\r\n                });\r\n\r\n                // get all the savings from new table\r\n                firebase.db.ref(`savingsTable/${this.state.authUser.uid}`).on(\"value\", data => {\r\n                    if (data.val() !== null) {\r\n                        this.setState({ savings: data.val() });\r\n                    } else {\r\n                        this.setState({ savings: data.val() });\r\n                    }\r\n                });\r\n\r\n                // get all the defaultCategories\r\n                firebase.db.ref(\"defaultCategories\").on(\"value\", data => {\r\n                    if (data.val() !== null) {\r\n                        this.setState({\r\n                            defaultCategoriesNames: Object.keys(data.val()),\r\n                            defaultCategoriesColors: Object.values(data.val())\r\n                        });\r\n                    }\r\n                });\r\n\r\n                // // get all the loan details\r\n                // firebase.db.ref(\"loans\").on(\"value\", data => {\r\n                //     if (data) {\r\n                //         this.setState({\r\n                //             loans: data.val()\r\n                //         });\r\n                //     }\r\n                // });\r\n\r\n                // get all the expenses from new table\r\n                firebase.db.ref(`loanTable/${this.state.authUser.uid}`).on(\"value\", data => {\r\n                    if (data.val() !== null) {\r\n                        this.setState({\r\n                            loans: data.val()\r\n                        });\r\n                    } else {\r\n                        // get and set expenses in db from old expenses table to new expenseTable\r\n                        firebase.db.ref(\"loans\").on(\"value\", data => {\r\n                            if (data.val() !== null) {\r\n                                const eachExpense = utils.eachExpense(data.val());\r\n                                const thisUsersLoans = utils.currentUsersExpenses(eachExpense, this.state.authUser);\r\n\r\n                                thisUsersLoans.map(elem => {\r\n                                    db.doCreateLoanTable(\r\n                                        elem.value.uid,\r\n                                        elem.value.date,\r\n                                        elem.value.amount,\r\n                                        elem.value.loanType,\r\n                                        elem.value.reason,\r\n                                        elem.value.person,\r\n                                        elem.value.day,\r\n                                        elem.value.status,\r\n                                        elem.key\r\n                                    );\r\n                                });\r\n\r\n                                thisUsersLoans.map(elem => {\r\n                                    firebase.db.ref(`loans/${elem.key}`).remove();\r\n                                });\r\n\r\n                                // need to set empty state once deleting all records in legacy table\r\n                                // or else it will always be loading\r\n\r\n                                this.setState({\r\n                                    loans: data.val()\r\n                                });\r\n                            }\r\n                        });\r\n                    }\r\n                });\r\n\r\n                const expensesRef = firebase.db.ref(`expenseTable/${this.state.authUser.uid}`);\r\n                expensesRef.on(\"child_removed\", data => {\r\n                    firebase.db.ref(`expenseTable/${this.state.authUser.uid}`).on(\"value\", data => {\r\n                        if (data) {\r\n                            this.setState({\r\n                                expenses: data.val()\r\n                            });\r\n                        }\r\n                    });\r\n                });\r\n\r\n                const loansRef = firebase.db.ref(`loanTable/${this.state.authUser.uid}`);\r\n                loansRef.on(\"child_removed\", data => {\r\n                    firebase.db.ref(`loanTable/${this.state.authUser.uid}`).on(\"value\", data => {\r\n                        if (data) {\r\n                            this.setState({\r\n                                loans: data.val()\r\n                            });\r\n                        }\r\n                    });\r\n                });\r\n            }\r\n\r\n            // return authUser ? this.setState(() => { authUser: authUser}) : this.setState(() => ({authUser: null}))\r\n        });\r\n    }\r\n\r\n    render() {\r\n        const bodyStyle = {\r\n            backgroundColor: this.state.settings\r\n                ? this.state.settings.mode === \"night\"\r\n                    ? \"#484842 !important\"\r\n                    : \"auto\"\r\n                : \"auto\",\r\n            height: \"100vh\"\r\n        };\r\n\r\n        var patternconfig = { height: 300, width: 500, cell_size: 35 }; // palette: Trianglify.colorbrewer,\r\n        var pattern = Trianglify({ ...patternconfig });\r\n        var pattern2 = Trianglify({ ...patternconfig });\r\n        var pattern3 = Trianglify({ ...patternconfig });\r\n        var pattern4 = Trianglify({ ...patternconfig });\r\n        var pattern5 = Trianglify({ ...patternconfig });\r\n        var pattern6 = Trianglify({ ...patternconfig });\r\n        var pattern7 = Trianglify({ ...patternconfig });\r\n        var pattern8 = Trianglify({ ...patternconfig });\r\n\r\n        const cards = {\r\n            card8: { backgroundImage: `url(${pattern8.png()})` },\r\n            card7: { backgroundImage: `url(${pattern7.png()})` },\r\n            card6: { backgroundImage: `url(${pattern6.png()})` },\r\n            card5: { backgroundImage: `url(${pattern5.png()})` },\r\n            card4: { backgroundImage: `url(${pattern4.png()})` },\r\n            card3: { backgroundImage: `url(${pattern3.png()})` },\r\n            card2: { backgroundImage: `url(${pattern2.png()})` },\r\n            card1: { backgroundImage: `url(${pattern.png()})` }\r\n        };\r\n\r\n        return (\r\n            <Router>\r\n                <div style={bodyStyle}>\r\n                    <Navigation authUser={this.state.authUser} settings={this.state.settings} />\r\n                    <Switch>\r\n                    {/* <Route exact path={routes.LANDING} component={() => <SignInPage />} /> */}\r\n                    <Route exact path={routes.SIGN_UP} component={() => <SignUpPage />} />\r\n                    <Route exact path={routes.SIGN_IN} component={() => <SignInPage />} />\r\n                    <Route exact path={routes.SHOP} component={() => <ShopPage />} />\r\n\r\n                    <Route exact path={routes.PASSWORD_FORGET} component={() => <PasswordForgetPage />} />\r\n                    <Route\r\n                        exact\r\n                        path={routes.UPDATE_PASSWORD}\r\n                        component={() => <UpdatePassword user={this.state.authUser} />}\r\n                    />\r\n                    <Route exact path={routes.USER_VERIFICATION} component={() => <UserVerification />} />\r\n                    <Route\r\n                        exact\r\n                        path={routes.HOME}\r\n                        component={() => (\r\n                            <HomePage\r\n                                user={this.state.authUser}\r\n                                expenses={this.state.expenses}\r\n                                settings={this.state.settings}\r\n                                cards={cards}\r\n                            />\r\n                        )}\r\n                    />\r\n                    <Route\r\n                        exact\r\n                        path={routes.MONTH_VIEW}\r\n                        component={() => (\r\n                            <MonthViewPage\r\n                                user={this.state.authUser}\r\n                                expenses={this.state.expenses}\r\n                                settings={this.state.settings}\r\n                                cards={cards}\r\n                            />\r\n                        )}\r\n                    />\r\n\r\n                    <Route\r\n                        exact\r\n                        path={routes.DAILY_VIEW}\r\n                        component={() => (\r\n                            <DailyViewPage\r\n                                user={this.state.authUser}\r\n                                expenses={this.state.expenses}\r\n                                settings={this.state.settings}\r\n                                cards={cards}\r\n                            />\r\n                        )}\r\n                    />\r\n\r\n                    <Route\r\n                        exact\r\n                        path={routes.FILTER_VIEW}\r\n                        component={() => (\r\n                            <FilterViewPage\r\n                                user={this.state.authUser}\r\n                                expenses={this.state.expenses}\r\n                                settings={this.state.settings}\r\n                                cards={cards}\r\n                            />\r\n                        )}\r\n                    />\r\n                    <Route\r\n                        exact\r\n                        path={routes.STATISTICS_VIEW}\r\n                        component={() => (\r\n                            <StatisticsPage\r\n                                user={this.state.authUser}\r\n                                expenses={this.state.expenses}\r\n                                settings={this.state.settings}\r\n                                cards={cards}\r\n                            />\r\n                        )}\r\n                    />\r\n                    <Route\r\n                        exact\r\n                        path={routes.LOAN_VIEW}\r\n                        component={() => (\r\n                            <LoanPage\r\n                                user={this.state.authUser}\r\n                                loans={this.state.loans}\r\n                                settings={this.state.settings}\r\n                                cards={cards}\r\n                            />\r\n                        )}\r\n                    />\r\n\r\n                    <Route\r\n                        exact\r\n                        path={routes.SETTINGS_VIEW}\r\n                        component={() => (\r\n                            <SettingsPage user={this.state.authUser} settings={this.state.settings} cards={cards} />\r\n                        )}\r\n                    />\r\n\r\n                    <Route\r\n                        exact\r\n                        path={routes.SAVINGS_VIEW}\r\n                        component={() => (\r\n                            <SavingsPage\r\n                                user={this.state.authUser}\r\n                                savings={this.state.savings}\r\n                                settings={this.state.settings}\r\n                            />\r\n                        )}\r\n                    />\r\n\r\n                    <Route\r\n                        component={() => (\r\n                            <ErrorPage />\r\n                        )}\r\n                    />\r\n                    </Switch>\r\n                </div>\r\n            </Router>\r\n        );\r\n    }\r\n}\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}